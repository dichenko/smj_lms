# SMJ LMS - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏–µ–º

Cloudflare Workers –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏–µ–º —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞ –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- Cloudflare –∞–∫–∫–∞—É–Ω—Ç
- Telegram Bot Token

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone <repository-url>
cd smj-lms/lms-app
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
npm install
```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞:**
   - –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ [@BotFather](https://t.me/botfather)
   - –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
   - –ü–æ–ª—É—á–∏—Ç–µ –≤–∞—à Telegram Chat ID

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
npx wrangler secret put TELEGRAM_BOT_TOKEN
# –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞

npx wrangler secret put TELEGRAM_ADMIN_CHAT_ID
# –í–≤–µ–¥–∏—Ç–µ –≤–∞—à Telegram Chat ID
```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ:**
```bash
npm run dev
```

6. **–î–µ–ø–ª–æ–π –≤ Cloudflare:**
```bash
npm run deploy
```

## ü§ñ Telegram Bot

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:
- `/start` - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ
- `/lesson` - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π —É—Ä–æ–∫
- `/progress` - –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è
- `/reports` - –ò—Å—Ç–æ—Ä–∏—è –≤–∞—à–∏—Ö –æ—Ç—á–µ—Ç–æ–≤
- `/submit` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç (–æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ —Ñ–∞–π–ª)
- `/help` - –°–ø—Ä–∞–≤–∫–∞

### –ö–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç:
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–∞–π–ª (PDF, DOC, DOCX, —Ñ–æ—Ç–æ)
2. –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –Ω–µ–≥–æ –∫–æ–º–∞–Ω–¥–æ–π `/submit`

## üìä API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints:
- `GET /api/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- `GET /api/students` - –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- `GET /api/courses` - –°–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤
- `GET /api/reports` - –°–ø–∏—Å–æ–∫ –æ—Ç—á–µ—Ç–æ–≤
- `POST /api/telegram/webhook` - Webhook –¥–ª—è Telegram –±–æ—Ç–∞

### –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API:
- –°—Ç—É–¥–µ–Ω—Ç—ã: `/api/students`
- –ö—É—Ä—Å—ã: `/api/courses`
- –£—Ä–æ–∫–∏: `/api/courses/:id/lessons`
- –û—Ç—á–µ—Ç—ã: `/api/reports`
- –õ–æ–≥–∏: `/api/logs`

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Cloudflare D1 (SQLite) —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏:
- `admins` - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —Å–∏—Å—Ç–µ–º—ã
- `students` - –°—Ç—É–¥–µ–Ω—Ç—ã —Å Telegram ID
- `courses` - –ö—É—Ä—Å—ã –æ–±—É—á–µ–Ω–∏—è
- `lessons` - –£—Ä–æ–∫–∏ –∫—É—Ä—Å–æ–≤
- `reports` - –û—Ç—á–µ—Ç—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- `error_logs` - –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
- `admin_sessions` - –°–µ—Å—Å–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:
```
src/
‚îú‚îÄ‚îÄ index.ts              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ database.ts       # –¢–∏–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ database.ts       # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îî‚îÄ‚îÄ telegram/
    ‚îú‚îÄ‚îÄ bot.ts            # Telegram –±–æ—Ç
    ‚îî‚îÄ‚îÄ webhook.ts        # Webhook handler
```

### –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
npm run dev          # –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run deploy       # –î–µ–ø–ª–æ–π –≤ Cloudflare
npm run cf-typegen   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤
```

## üåê –î–µ–ø–ª–æ–π

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç—Å—è –≤ Cloudflare Workers:
- **URL:** `https://smj-lms.[account-id].workers.dev`
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** Cloudflare D1
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã:** Cloudflare Assets

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
